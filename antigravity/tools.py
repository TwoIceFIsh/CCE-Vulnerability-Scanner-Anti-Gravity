import os
import zipfile

import chardet
from requests import Response


def get_file(file_path: str):
    with open(file_path, 'r') as f:
        return f.readlines()


def is_encoded(file_path: str):
    rawdata = open(file_path, mode='rb').read()
    data = chardet.detect(rawdata)
    result = data['encoding']
    return result


def to_utf8(file_path: str, encoding_in: str):
    try:
        with open(file_path, 'r', encoding=encoding_in) as f:
            datas = f.read()

        with open(file_path, 'w', encoding='utf-8') as k:
            k.write(datas)
    except:
        print('변환 실패')


def response_to_json(response: Response):
    return response.json()


def extract(application_path: str, file_name: str):
    with zipfile.ZipFile(file_name, 'r') as zip_ref:
        zip_ref.extractall(os.path.join(application_path, 'update', 'tmp'))
